<!DOCTYPE html>
<html>

<head>
	<title>fractiform</title>
	<style>
	body {
		font-family: sans-serif;
		background-color: black;
		margin: 0;
		padding: 0;
		color: white;
		overflow: hidden;
	}
	
	
	:root {
		--ui-border: white;
		--ui-height: 2.5em;
	}
	
	#page {
		width: 100vw;
		position: relative;
	}
	#page[data-ui-shown="1"] {
		top: var(--ui-height);
		height: calc(100vh - var(--ui-height));
	}
	#page[data-ui-shown="0"] {
		top: 0;
		height: 100vh;
	}
	
	#canvas, #ui-canvas {
		position: absolute;
		left: 0;
		top: 0;
	}
	
	.error {
		color: red;
	}
	
	#error-dialog {
		border: 2px solid red;
		background-color: black;
	}
	dialog button {
		font-family: monospace;
	}
	button {
		border: 2px solid var(--ui-border);
		background-color: black;
		color: white;
	}
	button:hover {
		background-color: #fff3;
	}
	button:active {
		background-color: #fff6;
	}
	button:focus {
		outline: 2px solid #0a0;
	}
	#ui {
		display: block;
		width: 100vw;
		height: var(--ui-height);
		background-color: #111;
		border-bottom: 2px solid var(--ui-border);
		position: absolute;
		top: 0;
		left: 0;
		vertical-align:middle;
	}
	#ui input {
		vertical-align: middle;
		display: inline-block;
		height: 2.0em;
		margin: 0.3em 0.1em 0.3em 0.3em;
		border: 2px solid var(--ui-border);
		background-color: #333;
		color: white;
	}
	#ui input[type=color] {
		padding: 0;
	}
	#ui input[type=text] {
		width: 3em;
		font-size: inherit;
		height: 1.5em;
	}
	#ui label {
		margin-right: 0.5em;
	}
	</style>
	<meta charset="utf-8">
	<meta content="width=device-width,initial-scale=1" name="viewport">
	<script id="main-vertex-shader" type="x-shader/x-vertex">
attribute vec2 v_pos;
attribute vec2 v_uv;
attribute vec4 v_color;
varying vec2 uv;
varying vec4 color;
void main() {
	uv = v_uv;
	color = v_color;
	gl_Position = vec4(v_pos, 0.0, 1.0);
}
	</script>
	<script id="main-fragment-shader" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D u_texture;
varying vec4 color;
varying vec2 uv;

void main() {
	gl_FragColor = mix(texture2D(u_texture, uv), vec4(color.xyz, 1.0), color.w);
}
	</script>
	
	<script id="post-vertex-shader" type="x-shader/x-vertex">
attribute vec2 v_pos;
varying vec2 uv;
void main() {
	uv = v_pos * 0.5 + 0.5;
	gl_Position = vec4(v_pos, 0.0, 1.0);
}
	</script>
	<script id="post-fragment-shader" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_texture;
varying vec2 uv;
void main() {
	gl_FragColor = texture2D(u_texture, uv);
}
	</script>
</head>

<body>
<script src="fractiform.js" type="text/javascript"></script>
<div id="page" data-ui-shown="1">
	<noscript>
		<p>
			This page requires JavaScript to function.<br>
			Try using a modern browser such as <em>Netscape Navigator</em>&reg;.
		</p>
	</noscript>
	<canvas id="canvas">
		<p>
			Your browser doesn't support HTML5 &lt;canvas&gt;.<br>
			This page won't work for you.
		</p>
	</canvas>
	<canvas id="ui-canvas"></canvas>
</div>
<div id="ui">
	<!--
	<input type="text" value="1.0" name="red-input" id="red-input">
	<label for="red-input">R</label>
	<input type="text" value="1.0" name="green-input" id="green-input">
	<label for="green-input">G</label>
	<input type="text" value="1.0" name="blue-input" id="blue-input">
	<label for="blue-input">B</label>
	-->
	<input type="color" value="#ffffff" name="color-input" id="color-input" aria-label="Color">
	<input type="text" value="0.1" name="color-mix-input" id="color-mix-input">
	<label for="color-mix-input">opacity</label>
</div>

<dialog id="error-dialog">
  <pre id="error-message" class="error"></pre>
</dialog>

</body>
</html>
